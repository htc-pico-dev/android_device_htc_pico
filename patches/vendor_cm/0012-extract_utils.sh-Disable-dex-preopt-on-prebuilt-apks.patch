From f29adbaab3928d3255fd17d967bc0ffd024069a9 Mon Sep 17 00:00:00 2001
From: Hashbang173 <hashbang173@gmail.com>
Date: Sun, 28 Aug 2016 20:38:45 -0400
Subject: [PATCH 12/39] extract_utils.sh: Disable dex preopt on prebuilt apks

Change-Id: I230f1a8bb95cbc1df36bc652b03e58829ec278f5
---
 build/tools/extract_utils.sh | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/build/tools/extract_utils.sh b/build/tools/extract_utils.sh
index fb7602b9..e6951d61 100644
--- a/build/tools/extract_utils.sh
+++ b/build/tools/extract_utils.sh
@@ -282,6 +282,9 @@ function write_packages() {
         fi
         printf 'LOCAL_MODULE_TAGS := optional\n'
         printf 'LOCAL_MODULE_CLASS := %s\n' "$CLASS"
+        if [ "$CLASS" = "APPS" ]; then
+            printf 'LOCAL_DEX_PREOPT := false\n'
+        fi
         if [ ! -z "$EXTENSION" ]; then
             printf 'LOCAL_MODULE_SUFFIX := .%s\n' "$EXTENSION"
         fi
-- 
2.15.0

